(this.webpackJsonpzacharyyoung_a3=this.webpackJsonpzacharyyoung_a3||[]).push([[0],{195:function(t,e,n){},217:function(t,e,n){"use strict";n.r(e);var a=n(6),r=n(0),c=n(10),s=n.n(c),i=(n(195),n(8)),o=n(13),l=n(256),u=n(267),d=n(258),f=n(260),p=n(219),h=n(262),b=n(261),g=n(28),m=n(7),j=n(47),v=n(40),x=n.n(v);var O=function(t){var e=t.setting,n=t.data,c=t.setBrushText,s=t.setBrushAverage,l=t.setBrushTitle,u=t.setBrushCompletion,d=Object(g.a)(),f=Object(r.useRef)(null),p=Object(r.useRef)(null),h=Object(r.useRef)(null),b=Object(r.useRef)(null),v=Object(j.a)(f),O=Object(o.a)(v,1)[0],y=Object(r.useRef)(0),w=Object(r.useRef)(!1),k=100,B=50,C=100,E=15,A=85,T=10,F=Object(r.useMemo)((function(){if(n){var t,a=[],r=Object(i.a)(n);try{for(r.s();!(t=r.n()).done;){var c=t.value;a=a.concat(c.sentences)}}catch(s){r.e(s)}finally{r.f()}return m.i().domain([m.g(a,(function(t){return t[e]})),m.e(a,(function(t){return t[e]}))]).range([k,0])}}),[n,e]);Object(r.useEffect)((function(){n&&F&&(p.current?(p.current.attr("width",O),p.current.select(".xLabelTextLeft").attr("x",B),p.current.select(".xLabelTextRight").attr("x",O)):(p.current=m.j("#chart-area").append("svg").attr("width",O).attr("height",C+150*n.length).style("overflow","visible"),p.current.append("text").attr("class","xLabelTextLeft").text("Beginning of Story").attr("x",B).attr("y",50).attr("fill","white").attr("font-size","12"),p.current.append("text").attr("class","xLabelTextRight").text("End of Story").attr("x",O).attr("y",50).attr("text-anchor","end").attr("fill","white").attr("font-size","12")))}),[F,n,O]);var R=Object(r.useCallback)((function(t,n,a){var r=x.a.range(B,O,(O-B)/n.sentences.length),c=m.c(r,t.offsetX)-1;if(r[c]&&F&&h.current){var s=F(n.sentences[c][e]);s&&h.current.attr("transform","translate(".concat(r[c],", ").concat(C+150*a+s-42.5,")"));var i=n.sentences[c].sentence;i.length>30&&(i=i.substr(0,27)+"..."),h.current.select(".metric").html("<tspan font-weight='bold' alignment-baseline='text-before-edge'>"+e+":</tspan> "+n.sentences[c][e]),h.current.select(".completion").html("<tspan font-weight='bold' alignment-baseline='text-before-edge'>completion:</tspan> "+(c/(n.sentences.length-1)*100).toFixed(2)+"%"),h.current.select(".sentence").text(i)}}),[F,e,O]),S=Object(r.useCallback)((function(t,e,n){var a=x.a.range(B,O,(O-B)/e.sentences.length),r=m.c(a,t.offsetX)-1;y.current=r,w.current=!0,a[r]&&b.current&&b.current.attr("transform","translate(".concat(a[r],", ").concat(C+150*n,")")).attr("points","0,0 0,".concat(k)).style("display",null)}),[O]),G=Object(r.useCallback)((function(t,e,n){if(!0===w.current){var a=x.a.range(B,O,(O-B)/e.sentences.length),r=m.c(a,t.offsetX)-1,c=a[r]-a[y.current];a[r]&&b.current&&b.current.attr("points","0,0 0,".concat(k," ").concat(c,",").concat(k," ").concat(c,",0"))}}),[O]),L=Object(r.useCallback)((function(t,n,a){var r=x.a.range(B,O,(O-B)/n.sentences.length),i=m.c(r,t.offsetX)-1,o=r[i];w.current=!1;var d=o-r[y.current];r[i]&&b.current&&b.current.attr("width",d);var f=Math.min(y.current,i),p=Math.max(y.current,i)+1;l(n.title),c(n.sentences.slice(f,p).map((function(t){return t.sentence})).join(""));var h=m.f(n.sentences.slice(f,p),(function(t){return t[e]}));s(h?+h.toFixed(2):0),u((p-f)/n.sentences.length*100)}),[O,c,l,s,u,e]);return Object(r.useEffect)((function(){if(0!==O&&n&&F&&p.current){var t=p.current.selectAll(".group").data(n);if(t.enter().each((function(t,n){if(p.current){var a,r=p.current.append("g").attr("class","group").attr("id","group"+n);r.append("text").attr("class","title").text(t.title+", avg: "+(null===(a=m.f(t.sentences,(function(t){return t[e]})))||void 0===a?void 0:a.toFixed(2))).attr("x",O/2).attr("y",150*n+C-25).attr("text-anchor","middle").attr("fill","white").attr("font-size","12").attr("font-weight","bold");var c=r.append("linearGradient").attr("id","gradient"+n).attr("x1",0).attr("x2",0).attr("y1",150*n+C).attr("y2",150*n+C+k).attr("gradientUnits","userSpaceOnUse");c.append("stop").attr("class","stop1").attr("offset","0%").attr("stop-color","readingEase"===e?d.palette.primary.main:d.palette.secondary.main),c.append("stop").attr("class","stop2").attr("offset","100%").attr("stop-color","readingGrade"===e?d.palette.primary.main:d.palette.secondary.main),r.select(".yAxis").remove();var s=m.b(F);r.append("g").attr("class","yAxis").attr("transform","translate(".concat(25,", ").concat(150*n+C,")")).call(s);var i=m.i().domain([0,t.sentences.length]).range([B,O]),o=m.d().x((function(t,e){var n=i(e);return n||0})).y((function(t){var a=F(t[e]);return(a||0)+150*n+C}));r.datum(t.sentences).append("path").attr("class","lineChart").attr("fill","none").attr("stroke","url(#gradient".concat(n,")")).attr("stroke-width","2").attr("d",o),r.append("rect").attr("class","overlay").attr("width",O-B).attr("height",k).attr("x",B).attr("y",150*n+C).attr("fill","none").style("pointer-events","all").on("mouseover",(function(){h.current&&h.current.style("display",null)})).on("mouseout",(function(){h.current&&h.current.style("display","none")})).on("mousemove",(function(e){R(e,t,n),G(e,t,n)})).on("mousedown",(function(e){S(e,t,n)})).on("mouseup",(function(e){L(e,t,n)}))}})),t.each((function(t,n){if(p.current){var a,r=p.current.select("#group"+n);r.select(".title").attr("x",O/2).text(t.title+", avg: "+(null===(a=m.f(t.sentences,(function(t){return t[e]})))||void 0===a?void 0:a.toFixed(2))),r.select(".stop1").transition().duration(1e3).attr("stop-color","readingEase"===e?d.palette.primary.main:d.palette.secondary.main),r.select(".stop2").transition().duration(1e3).attr("stop-color","readingGrade"===e?d.palette.primary.main:d.palette.secondary.main),r.select(".yAxis").remove();var c=m.b(F);r.append("g").attr("class","yAxis").attr("transform","translate(".concat(25,", ").concat(150*n+C,")")).call(c);var s=m.i().domain([0,t.sentences.length]).range([B,O]),i=m.d().x((function(t,e){var n=s(e);return n||0})).y((function(t){var a=F(t[e]);return(a||0)+150*n+C}));r.select(".lineChart").datum(t.sentences).transition().duration(1e3).attr("d",i),r.select(".overlay").attr("width",O-B).on("mousemove",(function(e){R(e,t,n),G(e,t,n)})).on("mousedown",(function(e){S(e,t,n)})).on("mouseup",(function(e){L(e,t,n)}))}})),0===t.size()){b.current=p.current.append("polygon").attr("class","brushOverlay").style("display","none").style("pointer-events","none").attr("points","0,0 0,".concat(k)).attr("fill","white").attr("fill-opacity","20%").attr("stroke","white").attr("stroke-width","1"),h.current=p.current.append("g").style("display","none").attr("class","tooltip").style("pointer-events","none"),h.current.append("polygon").attr("fill","white").attr("points","0,".concat(42.5,"\n            ").concat(E,",").concat(35,"\n            ").concat(E,",0\n            ").concat(280,",0\n            ").concat(280,",").concat(A,"\n            ").concat(E,",").concat(A,"\n            ").concat(E,",").concat(50)).attr("width",280).attr("x",E).attr("stroke","black").attr("stroke-width","2"),h.current.append("text").attr("class","metric").text("blah").attr("fill","black").attr("alignment-baseline","text-before-edge").attr("y",T).attr("x",25);var a=h.current.select(".metric").node();if(a&&a instanceof SVGGraphicsElement){var r=a.getBBox().height;h.current.append("text").attr("class","completion").attr("fill","black").attr("alignment-baseline","text-before-edge").attr("y",(function(){return r+3+T})).attr("x",25),h.current.append("text").attr("class","sentence").attr("font-style","italic").attr("fill","black").attr("alignment-baseline","text-before-edge").attr("y",(function(){return 2*(r+3)+T})).attr("x",25)}}}}),[O,d,n,F,R,S,L,G,e]),Object(a.jsx)("div",{id:"chart-area",ref:f})};var y=function(t){var e=t.setting,n=t.data,c=t.setBrushText,s=t.setBrushTitle,l=t.setBrushAverage,u=t.setBrushCompletion,d=Object(g.a)(),f=Object(r.useRef)(null),p=Object(r.useRef)(null),h=Object(r.useRef)(null),b=Object(j.a)(f),v=Object(o.a)(b,1)[0],x=300,O=Object(r.useMemo)((function(){return{readingEase:10,readingGrade:2}}),[]),y=40,w=170,k=Object(r.useMemo)((function(){if(n){var t,a=[],r=Object(i.a)(n);try{for(r.s();!(t=r.n()).done;){var c=t.value,s=m.f(c.sentences,(function(t){return t[e]}));s&&a.push(s)}}catch(u){r.e(u)}finally{r.f()}var o=m.g(a),l=m.e(a);if(o&&l)return m.i().domain([o-O[e],l+O[e]]).range([x,0])}}),[n,e,O]),B=Object(r.useMemo)((function(){if(n)return m.h().domain(n.map((function(t){return t.title}))).range([20,v])}),[n,v]),C=Object(r.useCallback)((function(t){if(B&&h.current&&k){var n=B(t.title);if(n){var a=n-85,r=m.f(t.sentences,(function(t){return t[e]}));if(r){var c=k(r);c&&h.current.attr("transform","translate(".concat(a+B.bandwidth()/2,", ").concat(x-c-y-15,")")).select("text").html("<tspan font-weight='bold' alignment-baseline='text-before-edge'>"+e+":</tspan> "+r.toFixed(2))}}}}),[B,k,e]);return Object(r.useEffect)((function(){if(n&&k&&B){p.current?p.current.attr("width",v):p.current=m.j("#chart-area-2").append("svg").attr("width",v).attr("height",x).style("overflow","visible"),p.current.selectAll(".axis").remove();var t=m.a(B),e=m.b(k),a=p.current.append("g").attr("class","axis").attr("transform","translate(0,".concat(x,")"));p.current.append("g").attr("class","axis").call(e).attr("transform","translate(".concat(20,",0)")),a.call(t),a.selectAll("text").style("text-anchor","end").attr("transform","translate(0,".concat(20,") rotate(-20) "))}}),[k,n,v,B]),Object(r.useEffect)((function(){if(0!==v&&n&&k&&B&&p.current){var t=p.current.selectAll(".average");t.data(n).enter().append("rect").attr("pointer-events","all").attr("class","average").attr("x",(function(t){var e=B(t.title);return e?e+5:0})).attr("y",(function(t){var n=m.f(t.sentences,(function(t){return t[e]}));return n&&(n=k(n))?x-n:0})).attr("width",B.bandwidth()-10).attr("height",(function(t){var n=m.f(t.sentences,(function(t){return t[e]}));return n&&(n=k(n))||0})).attr("fill",d.palette.primary.main).on("mouseover",(function(){h.current&&h.current.style("display",null)})).on("mouseout",(function(){h.current&&h.current.style("display","none")})).on("mousemove",(function(t,e){h.current&&C(e)})).on("click",(function(t,n){c(n.sentences.map((function(t){return t.sentence})).join("")),s(n.title);var a=m.f(n.sentences,(function(t){return t[e]}));l(a?+a.toFixed(2):0),u(100)})),t.data(n).attr("x",(function(t){var e=B(t.title);return e?e+5:0})).attr("width",B.bandwidth()-10).on("mousemove",(function(t,e){h.current&&C(e)})).transition().duration(1e3).attr("y",(function(t){var n=m.f(t.sentences,(function(t){return t[e]}));return n&&(n=k(n))?x-n:0})).attr("height",(function(t){var n=m.f(t.sentences,(function(t){return t[e]}));return n&&(n=k(n))||0})).attr("fill",d.palette.primary.main),p.current.select(".tooltip").remove(),h.current=p.current.append("g").style("display","none").attr("class","tooltip").style("pointer-events","none"),h.current.append("polygon").attr("fill","white").attr("points","0,0\n          ".concat(w,",0\n          ").concat(w,",").concat(y,"\n          ").concat(92.5,",").concat(y,"\n          ").concat(85,",").concat(55,"\n          ").concat(77.5,",").concat(y,"\n          0,").concat(y)).attr("width",w).attr("x",15).attr("stroke","black").attr("stroke-width","2"),h.current.append("text").attr("class","metric").text("blah").attr("fill","black").attr("alignment-baseline","text-before-edge").attr("text-anchor","middle").attr("y",10).attr("x",85)}}),[v,d,n,k,e,B,C,c,s,l,u]),Object(a.jsx)("div",{id:"chart-area-2",ref:f})},w=n(3),k=n(266),B=n(268),C=n(263),E=n(265),A=n(55),T=n.n(A),F=Object(l.a)((function(t){return Object(u.a)({grid:{padding:t.spacing(3,3,0)},root:{background:t.palette.background.default,height:"100vh",overflowY:"scroll",overflowX:"hidden"},title:{flexGrow:1},paper:{padding:t.spacing(3),position:"relative"},metric:{fontStyle:"italic"},chart:{zIndex:1e3},formControl:{minWidth:300},miniChart:{paddingBottom:t.spacing(15),marginBottom:t.spacing(3)},panelTitle:{marginBottom:t.spacing(3)}})}));var R=function(){var t=F(),e=Object(r.useState)("readingEase"),n=Object(o.a)(e,2),c=n[0],s=n[1],l=Object(r.useState)(null),u=Object(o.a)(l,2),g=u[0],j=u[1],v=Object(r.useState)(""),x=Object(o.a)(v,2),A=x[0],R=x[1],S=Object(r.useState)(""),G=Object(o.a)(S,2),L=G[0],N=G[1],z=Object(r.useState)(0),M=Object(o.a)(z,2),X=M[0],I=M[1],K=Object(r.useState)(0),P=Object(o.a)(K,2),J=P[0],U=P[1];return Object(r.useEffect)((function(){for(var t=[],e=0,n=["tom-tit-tot.txt","the-three-sillies.txt","the-rose-tree.txt","the-old-woman.txt","jack-fortune.txt","mr-vinegar.txt"];e<n.length;e++){var a=n[e];t.push(m.k("/englishfairytales/".concat(a)))}Promise.all(t).then((function(t){var e,n=[],a=Object(i.a)(t);try{for(a.s();!(e=a.n()).done;){var r=e.value,c=r.split("\n"),s=c[0],o=(r=c.splice(1).join("\n")).match(/\s?([^.!?,:()]|[:,](?!\s*\u201c|\u201d\s))+([.!?,:()]|[:,](?=\s+\u201c|\u201d\s+))+["\u201d]?/g),l=[];if(o){var u,d=Object(i.a)(o);try{for(d.s();!(u=d.n()).done;){var f=u.value,p={sentence:f,readingEase:T.a.fleschReadingEase(f),readingGrade:T.a.fleschKincaidGrade(f)};l.push(p)}}catch(h){d.e(h)}finally{d.f()}}n.push({title:s,sentences:l})}}catch(h){a.e(h)}finally{a.f()}j(n)}))}),[]),Object(a.jsxs)("div",{className:t.root,children:[Object(a.jsx)(d.a,{position:"static",children:Object(a.jsx)(f.a,{children:Object(a.jsx)(b.a,{variant:"h6",className:t.title,children:"Assignment 3"})})}),Object(a.jsxs)(h.a,{container:!0,spacing:3,className:t.grid,children:[Object(a.jsx)(h.a,{item:!0,xs:12,sm:7,children:Object(a.jsxs)(p.a,{className:Object(w.a)(t.paper,t.chart),children:[Object(a.jsxs)(C.a,{className:t.formControl,children:[Object(a.jsx)(B.a,{id:"demo-simple-select-label",children:"Age"}),Object(a.jsxs)(E.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:c,onChange:function(){s((function(t){return"readingEase"===t?"readingGrade":"readingEase"}))},children:[Object(a.jsx)(k.a,{value:"readingEase",children:"Flesch-Kincaid Reading Ease"}),Object(a.jsx)(k.a,{value:"readingGrade",children:"Flesch-Kincaid Grading Level"})]})]}),Object(a.jsx)(O,{setting:c,data:g,setBrushText:R,setBrushAverage:I,setBrushTitle:N,setBrushCompletion:U})]})}),Object(a.jsxs)(h.a,{item:!0,xs:12,sm:5,children:[Object(a.jsxs)(p.a,{className:Object(w.a)(t.paper,t.miniChart),children:[Object(a.jsxs)(b.a,{variant:"h6",className:t.panelTitle,children:["Averages"," "]}),Object(a.jsx)(y,{setting:c,data:g,setBrushText:R,setBrushTitle:N,setBrushAverage:I,setBrushCompletion:U})]}),A&&Object(a.jsxs)(p.a,{className:t.paper,children:[Object(a.jsx)(b.a,{variant:"h6",children:"Brush Selection"}),Object(a.jsx)(b.a,{variant:"body1",id:"currentAvg",className:t.metric}),Object(a.jsxs)(b.a,{variant:"body1",children:[Object(a.jsx)("strong",{children:"Fairytale:"})," ",L]}),Object(a.jsxs)(b.a,{variant:"body1",children:[Object(a.jsx)("strong",{children:"Average:"})," ",X]}),Object(a.jsxs)(b.a,{variant:"body1",children:[Object(a.jsx)("strong",{children:"Completion:"})," ",J.toFixed(2),"%"]}),Object(a.jsx)(b.a,{variant:"body1",children:Object(a.jsx)("em",{children:A})})]})]})]})]})},S=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,269)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,c=e.getLCP,s=e.getTTFB;n(t),a(t),r(t),c(t),s(t)}))},G=n(81),L=n(264),N=Object(G.a)({palette:{type:"dark"}});s.a.render(Object(a.jsx)(L.a,{theme:N,children:Object(a.jsx)(R,{})}),document.getElementById("root")),S()}},[[217,1,2]]]);
//# sourceMappingURL=main.62f1d38d.chunk.js.map